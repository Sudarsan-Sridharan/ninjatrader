<html>
<head>

    <script src="js/jquery.min.js"></script>
    <script src="js/ninjachart.js"></script>
    <script>
    var json = '{"id":"5727474a1fd9392af2541084","sym":"BDO","yr":2016,"val":{"o":101.9,"h":107.0,"l":93.05,"c":99.5,"v":181611400},"mos":{"1":{"4":{"o":106.0,"h":106.0,"l":101.9,"c":101.9,"v":551000},"5":{"o":101.9,"h":103.6,"l":100.9,"c":103.5,"v":1628820},"6":{"o":103.8,"h":103.9,"l":102.1,"c":103.4,"v":1621560},"7":{"o":103.8,"h":103.8,"l":102.0,"c":102.0,"v":1332980},"8":{"o":101.8,"h":101.8,"l":99.5,"c":99.5,"v":2395260},"11":{"o":99.5,"h":99.5,"l":94.5,"c":95.0,"v":3356220},"12":{"o":95.05,"h":98.4,"l":95.05,"c":95.9,"v":728080},"13":{"o":96.2,"h":98.9,"l":96.0,"c":98.0,"v":1932480},"14":{"o":97.0,"h":98.1,"l":95.1,"c":98.0,"v":2244520},"15":{"o":98.1,"h":98.3,"l":97.8,"c":98.0,"v":2829420},"18":{"o":97.05,"h":97.05,"l":94.5,"c":95.9,"v":1514860},"19":{"o":95.9,"h":96.8,"l":95.0,"c":95.8,"v":874110},"20":{"o":95.75,"h":96.0,"l":93.9,"c":95.5,"v":2477500},"21":{"o":93.5,"h":94.4,"l":93.05,"c":94.4,"v":2774550},"22":{"o":94.5,"h":97.2,"l":94.5,"c":96.5,"v":1539170},"25":{"o":96.1,"h":99.2,"l":96.1,"c":99.2,"v":819440},"26":{"o":97.85,"h":98.7,"l":95.4,"c":95.5,"v":2263270},"27":{"o":95.5,"h":99.3,"l":95.5,"c":99.15,"v":1874470},"28":{"o":99.1,"h":99.85,"l":98.0,"c":99.5,"v":2755840},"29":{"o":100.0,"h":102.0,"l":99.85,"c":102.0,"v":5221790}},"2":{"1":{"o":102.0,"h":103.0,"l":100.7,"c":102.6,"v":2698460},"2":{"o":101.6,"h":101.6,"l":99.4,"c":100.0,"v":3015410},"3":{"o":99.45,"h":99.65,"l":97.45,"c":97.5,"v":2856960},"4":{"o":98.0,"h":99.9,"l":97.65,"c":99.0,"v":3690430},"5":{"o":101.4,"h":101.4,"l":99.1,"c":101.0,"v":3140120},"9":{"o":100.9,"h":100.9,"l":96.2,"c":96.2,"v":342830},"10":{"o":96.9,"h":100.0,"l":96.9,"c":99.5,"v":2963650},"11":{"o":100.0,"h":100.0,"l":98.9,"c":99.5,"v":670920},"12":{"o":99.45,"h":100.2,"l":98.3,"c":99.5,"v":3475400},"15":{"o":99.65,"h":100.0,"l":98.0,"c":98.2,"v":2455040},"16":{"o":99.0,"h":99.5,"l":98.6,"c":99.05,"v":2407620},"17":{"o":99.3,"h":99.8,"l":98.7,"c":99.5,"v":2566960},"18":{"o":100.2,"h":101.5,"l":99.65,"c":101.5,"v":2363090},"19":{"o":102.0,"h":102.0,"l":99.95,"c":101.0,"v":2227410},"22":{"o":100.9,"h":100.9,"l":99.5,"c":100.0,"v":761870},"23":{"o":100.0,"h":100.2,"l":99.05,"c":100.0,"v":1750250},"24":{"o":100.0,"h":100.0,"l":97.75,"c":98.95,"v":683550},"26":{"o":98.8,"h":99.0,"l":97.05,"c":99.0,"v":2501920},"29":{"o":98.75,"h":99.9,"l":98.6,"c":99.0,"v":2853340}},"3":{"1":{"o":99.5,"h":99.95,"l":98.9,"c":99.45,"v":2056910},"2":{"o":100.5,"h":101.5,"l":99.8,"c":99.9,"v":4451730},"3":{"o":100.2,"h":100.2,"l":98.5,"c":98.5,"v":2575520},"4":{"o":98.55,"h":99.65,"l":98.55,"c":99.0,"v":2809640},"7":{"o":100.0,"h":100.7,"l":99.7,"c":100.7,"v":4258350},"8":{"o":100.7,"h":100.7,"l":100.0,"c":100.5,"v":1392800},"9":{"o":100.5,"h":102.3,"l":100.5,"c":101.0,"v":3111390},"10":{"o":101.4,"h":103.0,"l":101.4,"c":102.5,"v":3993620},"11":{"o":102.5,"h":105.0,"l":101.0,"c":105.0,"v":3939730},"14":{"o":105.0,"h":106.3,"l":104.3,"c":104.3,"v":2470360},"15":{"o":104.0,"h":105.5,"l":103.6,"c":104.0,"v":2162390},"16":{"o":104.0,"h":105.5,"l":103.5,"c":104.0,"v":806540},"17":{"o":104.0,"h":105.9,"l":103.9,"c":104.3,"v":2382370},"18":{"o":104.5,"h":105.5,"l":103.5,"c":104.0,"v":5656700},"21":{"o":105.8,"h":106.0,"l":104.9,"c":104.9,"v":2817160},"22":{"o":104.9,"h":105.8,"l":104.5,"c":105.0,"v":2424500},"23":{"o":104.9,"h":107.0,"l":104.7,"c":106.3,"v":3034620},"28":{"o":106.3,"h":106.3,"l":105.0,"c":105.0,"v":1632100},"29":{"o":105.0,"h":105.0,"l":104.2,"c":104.3,"v":2179320},"30":{"o":105.0,"h":106.0,"l":104.6,"c":104.7,"v":2784790},"31":{"o":105.8,"h":105.8,"l":102.2,"c":102.3,"v":2536260}},"4":{"1":{"o":103.0,"h":103.2,"l":100.9,"c":102.0,"v":1804480},"4":{"o":102.1,"h":102.2,"l":101.2,"c":101.7,"v":2828700},"5":{"o":102.0,"h":102.2,"l":101.2,"c":101.5,"v":1945000},"6":{"o":101.5,"h":101.7,"l":100.2,"c":101.1,"v":1696620},"7":{"o":101.1,"h":102.8,"l":101.1,"c":102.0,"v":2157870},"8":{"o":101.9,"h":102.5,"l":100.9,"c":102.0,"v":2218590},"11":{"o":102.2,"h":102.9,"l":102.2,"c":102.5,"v":1117790},"12":{"o":102.5,"h":103.3,"l":102.3,"c":103.0,"v":2020240},"13":{"o":103.5,"h":105.0,"l":102.9,"c":105.0,"v":2529110},"14":{"o":104.5,"h":105.0,"l":104.2,"c":104.4,"v":1584930},"15":{"o":104.4,"h":104.4,"l":103.5,"c":103.5,"v":425420},"18":{"o":103.0,"h":103.5,"l":102.0,"c":102.4,"v":901330},"19":{"o":102.4,"h":103.0,"l":102.3,"c":102.9,"v":1265390},"20":{"o":103.0,"h":104.0,"l":102.8,"c":103.1,"v":793270},"21":{"o":103.1,"h":104.0,"l":102.5,"c":104.0,"v":1961140},"22":{"o":104.0,"h":104.5,"l":103.0,"c":103.7,"v":1530500},"25":{"o":103.6,"h":103.6,"l":101.4,"c":101.5,"v":2714110},"26":{"o":101.0,"h":101.0,"l":98.5,"c":99.5,"v":5592210},"27":{"o":99.0,"h":99.5,"l":98.45,"c":99.5,"v":2887330}}}}';

    $(document).ready(function() {
        var ninjaChart = new NinjaChart('chart');

        $("#symbolForm").submit(function() {
            var symbol = $("#symbolInput").val();
            var baseUrl = "http://localhost:6060/ninjatrader";
            $.get(baseUrl + "/stock/" + symbol + "/price", function(data) {
                ninjaChart.showChart(data);
            });

            return false;
        });
    });
    </script>

    <style>
        #chart svg {
            background-color:#fff;
            font-family: Arial;
            font-size:10px;
        }
        #chart .candles rect {
            stroke-width:1px;
        }
        #chart .candles .up {
            stroke: #038003;
            fill:#03CA03;
        }
        #chart .candles .down {
            stroke: #650900;
            fill:#D20E00;
        }
        #chart .wicks .up {
            stroke-width: 1px;
            stroke: #038003;
        }
        #chart .wicks .down {
            stroke-width: 1px;
            stroke: #a30d00;
        }
        #chart .prices text {
            font-family: Arial;
            color:#aaa;
            cursor:default;
        }
        #chart .priceLines line {
            stroke-width: 1px;
            stroke: #eee;
        }
        #chart .dateLines line {
            stroke-width: 1px;
            stroke: #eee;
        }
        #chart .dateLabels text {
            color:#aaa;
            cursor:default;
        }
        #chart .cols rect {
            opacity: 0;
        }
        #chart .xCursorLine {
            stroke-width: 1px;
            stroke: #ee7d02;
        }
        #chart .xCursor rect {
            fill:#777;
        }
        #chart .xCursor .dateInd {
            fill:#fff;
        }
        #chart .priceMeta {
            font-size:12px;
            fill:#000;
        }
        #chart .priceMeta.up .metaValue  {
            fill:#038003;
        }
        #chart .priceMeta.down .metaValue {
            fill:#a30d00;
        }
    </style>
</head>

<body>
    <form id="symbolForm">
        <input type="text" id="symbolInput">
        <button type="submit" id="symbolSubmit">Submit</button>
    </form>

    <div id="chart"></div>
</body>
</html>